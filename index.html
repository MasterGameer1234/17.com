<!DOCTYPE html>
<html>
<head>
<title>Neon Dodge â€” By Michael</title>

<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet">

<style>
:root {
    --neon1: #ffb300;
    --neon2: #ff6f00;
    --player: #00eaff;
    --bg1: #000428;
    --bg2: #004e92;
}

* { margin: 0; padding: 0; box-sizing: border-box; user-select: none; }

body {
    background: black;
    overflow: hidden;
    font-family: "Orbitron", sans-serif;
}

/* GAME CANVAS */
canvas {
    display: block;
    width: 100vw;
    height: 100vh;
    background: radial-gradient(circle, var(--bg2), var(--bg1));
}

/* MENU */
#menu {
    position: absolute;
    inset: 0;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    color: white;
    z-index: 5;
    text-align: center;
}

h1 {
    font-size: 64px;
    color: var(--neon1);
    margin-bottom: 10px;
    text-shadow: 0 0 10px var(--neon1), 0 0 25px var(--neon2), 0 0 40px var(--neon1);
}

h2 {
    font-size: 28px;
    color: var(--neon1);
    margin-bottom: 40px;
}

button {
    width: 240px;
    padding: 18px;
    font-size: 22px;
    font-weight: bold;
    border: none;
    border-radius: 12px;
    background: var(--neon1);
    box-shadow: 0 0 20px var(--neon1);
    cursor: pointer;
    transition: 0.15s;
}

button:hover {
    transform: scale(1.12);
    background: var(--neon2);
    box-shadow: 0 0 25px var(--neon2);
}

/* GAME OVER SCREEN */
#gameOverScreen {
    position: absolute;
    inset: 0;
    background: rgba(0,0,0,0.0);
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 10;
}

#gameOverBox {
    text-align: center;
    color: #ff9900;
    padding: 40px 60px;
    border-radius: 20px;
    background: rgba(20,20,20,0.6);
    box-shadow: 0 0 30px #ff2200, 0 0 60px #ff5500;
}

#gameOverBox h1 {
    font-size: 74px;
    color: #ff4444;
    text-shadow: 0 0 20px #ff1111, 0 0 40px #ff5500;
}

#gameOverBox h2 {
    margin-top: -10px;
    margin-bottom: 30px;
    font-size: 32px;
    color: #ffaa00;
    text-shadow: 0 0 15px #ff8800;
}

#gameOverBox p {
    font-size: 26px;
    margin: 10px 0;
}

#gameOverBox button {
    margin-top: 25px;
    width: 200px;
    padding: 16px;
    font-size: 20px;
    border: none;
    border-radius: 12px;
    background: #ff9900;
    box-shadow: 0 0 25px #ff9900;
    cursor: pointer;
    transition: 0.15s;
}

#gameOverBox button:hover {
    transform: scale(1.1);
    background: #ff5500;
    box-shadow: 0 0 30px #ff5500;
}
</style>
</head>

<body>

<div id="menu">
    <h1>NEON DODGE</h1>
    <h2>By Michael Bell</h2>
    <button onclick="startGame()">PLAY</button>
</div>

<canvas id="game"></canvas>

<!-- CUSTOM GAME OVER UI -->
<div id="gameOverScreen">
    <div id="gameOverBox">
        <h1>GAME OVER</h1>
        <h2>Whomp Whomp ðŸ’€</h2>
        <p id="finalScore"></p>
        <p id="finalHigh"></p>
        <button onclick="restartGame()">Restart</button>
    </div>
</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

let keys = {};
let player, enemies, particles;
let spawnTimer = 0;
let gameOver = false;
let startTime = 0;
let frozenTime = null;
let shake = 0;

document.addEventListener("keydown", e => keys[e.key] = true);
document.addEventListener("keyup", e => keys[e.key] = false);

function resize() {
    canvas.width = innerWidth;
    canvas.height = innerHeight;
}
resize();
addEventListener("resize", resize);

/* NORMAL MODE SETTINGS */
const settings = {
    enemySpeed: 2.2,
    spawnRate: 800
};

function getHighScore() {
    return localStorage.getItem("neonScore_normal") || 0;
}
function setHighScore(v) {
    localStorage.setItem("neonScore_normal", v);
}

/* START GAME INSTANTLY */
function startGame() {
    document.getElementById("menu").style.display = "none";

    player = { x: canvas.width/2, y: canvas.height/2, size: 21, speed: 5 };
    enemies = [];
    particles = [];
    spawnTimer = 0;
    gameOver = false;
    frozenTime = null;

    startTime = performance.now();
    requestAnimationFrame(loop);
}

/* ENEMY SPAWN (ONLY FROM EDGES) */
function spawnEnemy() {
    const size = 22;
    let x, y;

    const side = Math.floor(Math.random()*4);
    if (side === 0) { x = Math.random()*canvas.width; y = -size; }
    else if (side === 1) { x = canvas.width+size; y = Math.random()*canvas.height; }
    else if (side === 2) { x = Math.random()*canvas.width; y = canvas.height+size; }
    else { x = -size; y = Math.random()*canvas.height; }

    enemies.push({
        x, y,
        size,
        speed: settings.enemySpeed + Math.random()*1.5,
        color: `hsl(${Math.random()*360},100%,60%)`
    });
}

/* MASSIVE DEATH PARTICLES */
function emitParticles(x, y, color) {
    const amount = 120;
    for (let i = 0; i < amount; i++) {
        const angle = Math.random() * Math.PI * 2;
        const speed = Math.random() * 6 + 2;

        particles.push({
            x, y,
            size: Math.random() * 4 + 2,
            vx: Math.cos(angle) * speed,
            vy: Math.sin(angle) * speed,
            alpha: 1,
            color
        });
    }

    // Shockwave
    for (let i = 0; i < 40; i++) {
        particles.push({
            x, y,
            size: 2,
            vx: (Math.random() - 0.5) * 14,
            vy: (Math.random() - 0.5) * 14,
            alpha: 1,
            color: "#ffffff"
        });
    }
}

function updateParticles() {
    particles = particles.filter(p => p.alpha > 0);
    particles.forEach(p=>{
        p.x += p.vx;
        p.y += p.vy;
        p.alpha -= 0.015;
    });
}

function movePlayer() {
    if (keys["ArrowUp"] || keys["w"]) player.y -= player.speed;
    if (keys["ArrowDown"] || keys["s"]) player.y += player.speed;
    if (keys["ArrowLeft"] || keys["a"]) player.x -= player.speed;
    if (keys["ArrowRight"] || keys["d"]) player.x += player.speed;

    player.x = Math.max(0, Math.min(canvas.width - player.size, player.x));
    player.y = Math.max(0, Math.min(canvas.height - player.size, player.y));
}

function updateEnemies() {
    enemies.forEach(e => {
        let dx = player.x - e.x;
        let dy = player.y - e.y;
        let d = Math.hypot(dx, dy);

        e.x += (dx/d) * e.speed;
        e.y += (dy/d) * e.speed;

        if (d < player.size) triggerDeath();
    });
}

function glowRect(x,y,size,color) {
    ctx.shadowBlur = 20;
    ctx.shadowColor = color;
    ctx.fillStyle = color;
    ctx.fillRect(x,y,size,size);
    ctx.shadowBlur = 0;
}

function applyShake() {
    if (shake > 0) {
        shake -= 0.5;
        ctx.translate((Math.random()-0.5)*shake, (Math.random()-0.5)*shake);
    }
}

function draw() {
    ctx.clearRect(0,0,canvas.width,canvas.height);
    ctx.save();
    applyShake();

    particles.forEach(p=>{
        ctx.globalAlpha = p.alpha;
        ctx.fillStyle = p.color;
        ctx.fillRect(p.x,p.y,p.size,p.size);
    });
    ctx.globalAlpha = 1;

    glowRect(player.x, player.y, player.size, "#00eaff");
    enemies.forEach(e => glowRect(e.x, e.y, e.size, e.color));

    ctx.restore();

    let score = (frozenTime !== null)
        ? frozenTime
        : ((performance.now() - startTime)/1000).toFixed(1);

    ctx.fillStyle = "white";
    ctx.font = "26px Orbitron";
    ctx.fillText(`Time: ${score}s`, 20, 40);
    ctx.fillText(`High: ${getHighScore()}s`, 20, 75);
}

/* CUSTOM GAME OVER SCREEN */
function triggerDeath() {
    if (gameOver) return;
    gameOver = true;

    shake = 25;
    emitParticles(player.x, player.y, "#00eaff");

    frozenTime = ((performance.now() - startTime)/1000).toFixed(1);
    const high = getHighScore();

    if (frozenTime > high) setHighScore(frozenTime);

    document.getElementById("finalScore").textContent = `Time: ${frozenTime}s`;
    document.getElementById("finalHigh").textContent = `High Score: ${Math.max(frozenTime, high)}s`;

    document.getElementById("gameOverScreen").style.display = "flex";
}

function restartGame() {
    location.reload();
}

function loop() {
    if (!gameOver) {
        movePlayer();

        spawnTimer += 16;
        if (spawnTimer >= settings.spawnRate) {
            spawnEnemy();
            spawnTimer = 0;
        }

        updateEnemies();
    }

    updateParticles();
    draw();
    requestAnimationFrame(loop);
}
</script>

</body>
</html>
